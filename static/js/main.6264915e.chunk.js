(this["webpackJsonpfullstack-apollo-react-boilerplate-project"]=this["webpackJsonpfullstack-apollo-react-boilerplate-project"]||[]).push([[0],{112:function(e,t,n){e.exports=n(148)},148:function(e,t,n){"use strict";n.r(t);var a=n(40),r=n(0),i=n.n(r),c=n(15),o=n.n(c),l=n(7),s=n(68),m=n(13),d=n(102),u=n(93),g=n(200),p=n(101),b=n(198),E=n(39),h=n(189),v=n(8),f=n(190),O=n(191),y=n(64),j=n(185);var I=n(94),w=n.n(I)()({basename:"/qrr-frontend"});const x=e=>{localStorage.removeItem("token"),e.resetStore(),w.push("/signin")};var k=()=>i.a.createElement(l.ApolloConsumer,null,e=>i.a.createElement(j.a,{bgcolor:"primary.light",onClick:()=>x(e)},"Sign Out"));const N=Object(h.a)(e=>({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})),S=({session:e})=>{const t=N();return i.a.createElement("div",{className:t},i.a.createElement(f.a,null,i.a.createElement(O.a,null,i.a.createElement(y.a,{variant:"h6",className:t.title},"QR^2"),i.a.createElement(y.a,null,i.a.createElement(k,null)))),i.a.createElement(O.a,null))},T=()=>{const e=N();return i.a.createElement("div",{className:e},i.a.createElement(f.a,null,i.a.createElement(O.a,null,i.a.createElement(y.a,{variant:"h6",className:e.title},"QR^2"),i.a.createElement(y.a,null,i.a.createElement(v.a,{to:"/signin"},i.a.createElement(j.a,{bgcolor:"contrastText"},"Sign In"))))),i.a.createElement(O.a,null))};var $=({session:e})=>i.a.createElement("div",null,e&&e.me?i.a.createElement(S,{session:e}):i.a.createElement(T,null)),q=n(9),R=n(10),B=n.n(R);function C(){const e=Object(q.a)(["\n  {\n    me {\n      id\n      username\n      email\n      role\n    }\n  }\n"]);return C=function(){return e},e}const F=B()(C());var U=e=>t=>i.a.createElement(l.Query,{query:F},({data:n,refetch:a})=>i.a.createElement(e,Object.assign({},t,{session:n,refetch:a}))),D=n(201),Q=n(152),M=n(5);function A(){const e=Object(q.a)(["\n  query {\n    recipes {\n      id\n      name\n      author {\n        username\n        id\n      }\n      ingredients {\n        qty\n        item {\n          name\n        }\n      }\n      instructions {\n        text\n        ingredients {\n          item {\n            name\n          }\n        }\n      }\n    }\n  }\n"]);return A=function(){return e},e}const L=B()(A());var P=Object(M.a)(e=>({list:{width:"100%",backgroundColor:e.palette.background.paper,paddingTop:0},inline:{display:"inline"},paperRoot:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2)},fontIcon:{float:"right",marginRight:5,cursor:"pointer"},paragraph:{marginTop:10},listItem:{paddingTop:0,paddingBottom:0},viewButton:{margin:5},button:{width:"100%"}}))(e=>{const t=e.classes,n=e.session;return i.a.createElement(l.Query,{query:L},e=>{const a=e.data;return i.a.createElement("div",null,n&&n.me&&i.a.createElement(v.a,{to:"/add-recipe"},i.a.createElement(j.a,{className:t.button,variant:"contained",color:"secondary"},"Add Recipe")),a&&a.recipes&&a.recipes.map(e=>i.a.createElement(Q.a,{className:t.paperRoot,key:e.id,variant:"outlined"},i.a.createElement(y.a,{variant:"h5"},e.name,n&&n.me&&e.author.id===n.me.id&&i.a.createElement(v.a,{to:"update-recipe/".concat(e.id)},i.a.createElement(D.a,{className:t.fontIcon}))),i.a.createElement(y.a,null,"# of Ingredients: ",e.ingredients.length),i.a.createElement(y.a,null,"# of Instructions: ".concat(e.instructions.length)),i.a.createElement(y.a,null,"Author: ",e.author.username),i.a.createElement(v.a,{to:"/view-ingredients/".concat(e.id)},i.a.createElement(j.a,{className:t.viewButton,variant:"outlined",color:"secondary"},"View Ingredients")),i.a.createElement(v.a,{to:"/view-instructions/".concat(e.id)},i.a.createElement(j.a,{className:t.viewButton,variant:"outlined",color:"secondary"},"View Instructions")))))})});var W=U(({session:e})=>i.a.createElement("div",null,i.a.createElement("h2",null,"Recipes"),i.a.createElement(P,{session:e}))),V=n(17),G=n.n(V),J=n(24);var H=({error:e})=>i.a.createElement("div",null,i.a.createElement("small",null,e.message));function Y(){const e=Object(q.a)(["\n  mutation($username: String!, $email: String!, $password: String!) {\n    signUp(username: $username, email: $email, password: $password) {\n      token\n    }\n  }\n"]);return Y=function(){return e},e}const z=B()(Y()),K={username:"",email:"",password:"",passwordConfirmation:""};class X extends r.Component{constructor(...e){var t;super(...e),t=this,this.state=Object(a.a)({},K),this.onChange=e=>{const t=e.target,n=t.name,a=t.value;this.setState({[n]:a})},this.onSubmit=(e,n)=>{n().then(function(){var e=Object(J.a)(G.a.mark((function e({data:n}){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState(Object(a.a)({},K)),localStorage.setItem("token",n.signUp.token),e.next=4,t.props.refetch();case 4:t.props.history.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.preventDefault()}}render(){const e=this.state,t=e.username,n=e.email,a=e.password,r=e.passwordConfirmation,c=a!==r||""===a||""===n||""===t;return i.a.createElement(l.Mutation,{mutation:z,variables:{username:t,email:n,password:a}},(e,{data:o,loading:l,error:s})=>i.a.createElement("form",{onSubmit:t=>this.onSubmit(t,e)},i.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),i.a.createElement("input",{name:"email",value:n,onChange:this.onChange,type:"text",placeholder:"Email Address"}),i.a.createElement("input",{name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),i.a.createElement("input",{name:"passwordConfirmation",value:r,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),i.a.createElement("button",{disabled:c||l,type:"submit"},"Sign Up"),s&&i.a.createElement(H,{error:s})))}}const Z=()=>i.a.createElement("p",null,"Don't have an account? ",i.a.createElement(v.a,{to:"/signup"},"Sign Up"));var _=Object(E.g)(({history:e,refetch:t})=>i.a.createElement("div",null,i.a.createElement("h1",null,"SignUp"),i.a.createElement(X,{history:e,refetch:t}))),ee=n(194),te=n(195),ne=n(199);function ae(){const e=Object(q.a)(["\n  mutation($login: String!, $password: String!) {\n    signIn(login: $login, password: $password) {\n      token\n    }\n  }\n"]);return ae=function(){return e},e}const re=B()(ae()),ie={login:"",password:""};class ce extends r.Component{constructor(...e){var t;super(...e),t=this,this.state=Object(a.a)({},ie),this.onChange=e=>{const t=e.target,n=t.name,a=t.value;this.setState({[n]:a})},this.onSubmit=(e,n)=>{localStorage.removeItem("token"),n().then(function(){var e=Object(J.a)(G.a.mark((function e({data:n}){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState(Object(a.a)({},ie)),localStorage.setItem("token",n.signIn.token),e.next=4,t.props.refetch();case 4:t.props.history.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(e=>{throw new Error(e)}),e.preventDefault()}}render(){const e=this.state,t=e.login,n=e.password,a=this.props.classes,r=""===n||""===t;return i.a.createElement(l.Mutation,{mutation:re,variables:{login:t,password:n}},(e,{data:c,loading:o,error:l})=>i.a.createElement("form",{className:a.root,onSubmit:t=>this.onSubmit(t,e)},i.a.createElement("div",null,i.a.createElement(ne.a,{required:!0,id:"login-filled-required",label:"Email Or Username",variant:"outlined",value:t,onChange:this.onChange,placeholder:"Email or Username",name:"login"}),i.a.createElement(ne.a,{variant:"outlined",required:!0,id:"pw-filled-required",name:"password",value:n,onChange:this.onChange,type:"password",placeholder:"Password"})),i.a.createElement(j.a,{disabled:r||o,type:"submit"},"Sign In"),l&&i.a.createElement(H,{error:l})))}}var oe=Object(M.a)(e=>({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"100%"}}}),{withTheme:!0})(ce);function le(){const e=Object(q.a)(["\n  mutation($login: String!, $password: String!) {\n    signIn(login: $login, password: $password) {\n      token\n    }\n  }\n"]);return le=function(){return e},e}B()(le());var se=Object(E.g)(({history:e,refetch:t})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(ee.a,null),i.a.createElement(te.a,{maxWidth:"sm"},i.a.createElement("h1",null,"SignIn"),i.a.createElement(oe,{history:e,refetch:t}),i.a.createElement(Z,null))));var me=e=>t=>n=>i.a.createElement(l.Query,{query:F},({data:a,networkStatus:r})=>r<7?null:e(a)?i.a.createElement(t,n):i.a.createElement(E.a,{to:"/signin"}));var de=me(e=>e&&e.me)(()=>i.a.createElement("div",null,i.a.createElement("h1",null,"Account Page")));var ue=me(e=>e&&e.me&&"ADMIN"===e.me.role)(()=>i.a.createElement("div",null,i.a.createElement("h1",null,"Admin Page")));function ge(){const e=Object(q.a)(["\n  mutation($name: String!) {\n    addRecipe(name: $name) {\n      id\n      name\n      author {\n        username\n      }\n    }\n  }\n"]);return ge=function(){return e},e}const pe=B()(ge());class be extends r.Component{constructor(...e){var t;super(...e),t=this,this.state={name:""},this.onChange=e=>{const t=e.target,n=t.name,a=t.value;this.setState({[n]:a})},this.onSubmit=function(){var e=Object(J.a)(G.a.mark((function e(n,a){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,a();case 4:t.setState({name:""}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()}render(){const e=this.props.session,t=this.state.name;return i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{to:"/"},"Back To Recipes"),e&&e.me?i.a.createElement(l.Mutation,{mutation:pe,variables:{name:t}},(e,n)=>{n.data,n.loading;const a=n.error;return i.a.createElement("form",{onSubmit:t=>this.onSubmit(t,e)},i.a.createElement("input",{name:"name",value:t,onChange:this.onChange}),i.a.createElement("button",{type:"submit"},"Send"),a&&i.a.createElement(H,{error:a}))}):"Not Allowed To Add Recipe, You Must Sign In")}}var Ee=U(be),he=n(20),ve=n(4);function fe(){const e=Object(q.a)(["\n  mutation($id: ID!) {\n    deleteRecipe(id: $id)\n  }\n"]);return fe=function(){return e},e}function Oe(){const e=Object(q.a)(["\n  query($id: ID!) {\n    recipe(id: $id) {\n      id\n      name\n      rating\n      originUrl\n      originText\n      cookingTime\n      ingredients {\n        id\n      }\n      instructions {\n        id\n      }\n    }\n  }\n"]);return Oe=function(){return e},e}function ye(){const e=Object(q.a)(["\n  mutation(\n    $id: ID!\n    $name: String!\n    $rating: Int\n    $originUrl: String\n    $originText: String\n    $cookingTime: String\n  ) {\n    updateRecipe(\n      id: $id\n      name: $name\n      rating: $rating\n      originUrl: $originUrl\n      originText: $originText\n      cookingTime: $cookingTime\n    ) {\n      id\n      name\n      rating\n      originUrl\n      originText\n      cookingTime\n      ingredients {\n        id\n      }\n      instructions {\n        id\n      }\n    }\n  }\n"]);return ye=function(){return e},e}const je=B()(ye()),Ie=B()(Oe()),we=B()(fe()),xe=e=>{const t=e.data,n=e.loading,a=e.error,c=e.classes,o=Object(r.useState)(Object(ve.get)(t,"recipe.id")),s=Object(he.a)(o,2),m=s[0],d=(s[1],Object(r.useState)(Object(ve.get)(t,"recipe.name"))),u=Object(he.a)(d,2),g=u[0],p=u[1],b=Object(r.useState)(Object(ve.get)(t,"recipe.rating")),E=Object(he.a)(b,2),h=E[0],f=E[1],O=Object(r.useState)(Object(ve.get)(t,"recipe.originUrl")),y=Object(he.a)(O,2),I=y[0],w=y[1],x=Object(r.useState)(Object(ve.get)(t,"recipe.originText")),k=Object(he.a)(x,2),N=k[0],S=k[1],T=Object(r.useState)(Object(ve.get)(t,"recipe.cookingTime")),$=Object(he.a)(T,2),q=$[0],R=$[1],B=e=>p(e.target.value),C=e=>f(Number(e.target.value)),F=e=>w(e.target.value),U=e=>S(e.target.value),D=e=>R(e.target.value),Q=function(){var e=Object(J.a)(G.a.mark((function e(t,n){var a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n();case 4:if(!(a=e.sent)){e.next=8;break}return console.log("update worked"),e.abrupt("return",a);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var t=Object(J.a)(G.a.mark((function t(n,a){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,a();case 4:t.sent&&(console.log("delete worked"),e.history.push("/")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),A=""===g;return i.a.createElement(te.a,{maxWidth:"sm"},i.a.createElement(l.Mutation,{mutation:je,variables:{id:m,name:g,rating:h,originUrl:I,originText:N,cookingTime:q}},(e,t)=>i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:t=>Q(t,e)},i.a.createElement(ne.a,{required:!0,id:"name-filled-required",label:"Recipe Name",variant:"outlined",value:g,onChange:B,placeholder:"Recipe Name",name:"name",className:c.textField}),i.a.createElement(ne.a,{id:"rating-filled-required",label:"Recipe Rating",variant:"outlined",value:h,onChange:C,placeholder:"Recipe Rating",name:"rating",type:"number",className:c.textField,inputProps:{step:1,min:1,max:5}}),i.a.createElement(ne.a,{id:"cooking-time-filled",label:"Recipe Cooking Time",variant:"outlined",value:q,onChange:D,placeholder:"Recipe Cooking Time",name:"cookingTime",className:c.textField}),i.a.createElement(ne.a,{id:"origin-url-filled",label:"Recipe URL",variant:"outlined",value:I,onChange:F,placeholder:"Recipe URL",name:"originUrl",className:c.textField}),i.a.createElement(ne.a,{id:"origin-text-filled",label:"Recipe Origin",variant:"outlined",value:N,onChange:U,placeholder:"Recipe URL",name:"originText",className:c.textField}),a&&i.a.createElement(H,{error:a}),i.a.createElement(j.a,{disabled:A||n,type:"submit",className:c.button,variant:"contained",color:"primary"},"Save")))),i.a.createElement(l.Mutation,{mutation:we,variables:{id:m}},(e,t)=>i.a.createElement(j.a,{variant:"contained",bgcolor:"error",className:c.button,onClick:t=>M(t,e),style:{marginTop:10}},"Delete Recipe")),i.a.createElement(v.a,{to:"/edit-ingredients/".concat(m)},i.a.createElement(j.a,{color:"secondary",variant:"contained",className:c.editButton,style:{marginRight:10}},"Edit Ingredients")),i.a.createElement(v.a,{to:"/edit-instructions/".concat(m)},i.a.createElement(j.a,{color:"secondary",variant:"contained",className:c.editButton},"Edit Instructions")))};var ke=Object(M.a)(e=>({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"100%"}},button:{width:"100%"},editButton:{width:"49%",marginBottom:10,marginTop:10},textField:{marginBottom:10,width:"100%"}}),{withTheme:!0})(Object(E.g)(U(e=>{let t=Object(E.f)().id;const n=e.classes,a=e.history;return i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{to:"/"},"Back To Recipes"),i.a.createElement(l.Query,{query:Ie,variables:{id:t}},e=>Object(ve.get)(e,"data.recipe")&&!Object(ve.get)(e,"loading")?i.a.createElement(xe,Object.assign({},e,{classes:n,history:a})):i.a.createElement("div",null,"Loading...")))})));function Ne(){const e=Object(q.a)(["\n  query($recipeId: ID!) {\n    recipe(id: $recipeId) {\n      name\n      ingredients {\n        id\n        qty\n        item {\n          name\n        }\n        uom {\n          name\n          alias\n        }\n      }\n    }\n  }\n"]);return Ne=function(){return e},e}const Se=B()(Ne()),Te=e=>{const t=e.data,n=(e.error,e.classes);return i.a.createElement("div",null,t.recipe.ingredients.map(e=>i.a.createElement(Q.a,{variant:"outlined",key:"ingredient-".concat(e.id),className:n.paperRoot},i.a.createElement(y.a,null,"Item: ",Object(ve.get)(e,"item.name")),i.a.createElement(y.a,null,"Quantity: ",Object(ve.get)(e,"qty")),Object(ve.get)(e,"uom")&&i.a.createElement(y.a,null,"Unit Of Measure: ",Object(ve.get)(e,"uom.name")," -"," ",Object(ve.get)(e,"uom.alias")))))};var $e=Object(M.a)(e=>({linkButton:{width:"`100%"},paperRoot:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2)}}),{withTheme:!0})(Object(E.g)(U(e=>{let t=Object(E.f)().recipeId;const n=e.classes;return i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{to:"/"},i.a.createElement(j.a,{variant:"outlined",color:"secondary"},"Back To Recipes")),i.a.createElement(l.Query,{query:Se,variables:{recipeId:t}},({data:e,loading:t,error:a})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{variant:"h3"},Object(ve.get)(e,"recipe.name")," Ingredients"),Object(ve.get)(e,"recipe.ingredients")&&!t?i.a.createElement(Te,{data:e,error:a,classes:n}):"loading")))})));function qe(){const e=Object(q.a)(["\n  query($recipeId: ID!) {\n    recipe(id: $recipeId) {\n      id\n      author {\n        id\n      }\n      name\n      ingredients {\n        id\n        qty\n        item {\n          name\n        }\n        uom {\n          name\n          alias\n        }\n      }\n    }\n  }\n"]);return qe=function(){return e},e}const Re=B()(qe()),Be=e=>{const t=e.data,n=(e.error,e.classes),a=e.me,r=a&&t.recipe.author.id===a.id;return i.a.createElement("div",null,t.recipe.ingredients.map(e=>i.a.createElement(Q.a,{key:"ingredient-".concat(e.id),className:n.paperRoot,variant:"outlined"},i.a.createElement(y.a,null,"Item: ",Object(ve.get)(e,"item.name"),r&&i.a.createElement(v.a,{to:"/update-ingredient/".concat(e.id)},i.a.createElement(D.a,{className:n.fontIcon}))),i.a.createElement(y.a,null,"Quantity: ",Object(ve.get)(e,"qty")),Object(ve.get)(e,"uom")&&i.a.createElement(y.a,null,"Unit Of Measure: ",Object(ve.get)(e,"uom.name")," -"," ",Object(ve.get)(e,"uom.alias")))),r&&i.a.createElement(v.a,{to:"/add-ingredient/".concat(t.recipe.id)},i.a.createElement(j.a,{className:n.linkButton,variant:"contained",color:"secondary"},"Add Ingredient")))};var Ce=Object(M.a)(e=>({linkButton:{width:"`100%"},paperRoot:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2)},fontIcon:{float:"right",marginRight:5,cursor:"pointer"},addButton:{width:"100%"}}),{withTheme:!0})(Object(E.g)(e=>{let t=Object(E.f)().recipeId;const n=e.classes,a=e.session;return i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{to:"/"},i.a.createElement(j.a,{variant:"outlined",color:"secondary"},"Back To Recipes")),i.a.createElement(l.Query,{query:Re,variables:{recipeId:t}},({data:e,loading:t,error:r})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{variant:"h3"},Object(ve.get)(e,"recipe.name")," Ingredients"),Object(ve.get)(e,"recipe.ingredients")&&!t?i.a.createElement(Be,{data:e,error:r,classes:n,me:a.me}):"loading")))})),Fe=n(196);function Ue(){const e=Object(q.a)(["\n  query {\n    items {\n      id\n      name\n    }\n    uoms {\n      id\n      name\n      alias\n    }\n  }\n"]);return Ue=function(){return e},e}function De(){const e=Object(q.a)(["\n  mutation(\n    $recipeId: Int!\n    $qty: Float!\n    $itemName: String\n    $itemId: Int\n    $uomId: Int\n  ) {\n    addIngredient(\n      recipeId: $recipeId\n      qty: $qty\n      itemName: $itemName\n      itemId: $itemId\n      uomId: $uomId\n    ) {\n      id\n      item {\n        name\n      }\n    }\n  }\n"]);return De=function(){return e},e}const Qe=B()(De()),Me=B()(Ue());var Ae=Object(M.a)(e=>({textField:{marginBottom:10,width:"100%"},backButton:{marginBottom:10},saveButton:{width:"100%"}}),{withTheme:!0})(Object(E.g)(e=>{let t=Object(E.f)().recipeId;const n=e.classes,a=e.history,c=Object(r.useState)(1),o=Object(he.a)(c,2),s=o[0],m=o[1],d=Object(r.useState)(""),u=Object(he.a)(d,2),g=u[0],p=u[1],b=Object(r.useState)(),h=Object(he.a)(b,2),f=h[0],O=h[1],y=Object(r.useState)(),I=Object(he.a)(y,2),w=I[0],x=I[1],k=e=>{m(Number(e.target.value))},N=e=>{p(e.target.value)},S=e=>{e.target.value&&p(""),O(Number(e.target.value))},T=e=>{x(Number(e.target.value))},$=function(){var e=Object(J.a)(G.a.mark((function e(t,n,r){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n();case 4:e.sent&&a.push("/edit-ingredients/".concat(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),q=!!f,R=""===s;return i.a.createElement(te.a,{maxWidth:"sm"},i.a.createElement(v.a,{to:"/edit-ingredients/".concat(t)},i.a.createElement(j.a,{variant:"outlined",color:"secondary",className:n.backButton},"Back To Edit Ingredients")),i.a.createElement(l.Query,{query:Me},({data:e,error:a,loading:r})=>i.a.createElement(l.Mutation,{mutation:Qe,variables:{recipeId:Number(t),qty:s,itemName:g,itemId:f,uomId:w}},(c,o)=>i.a.createElement("form",{onSubmit:e=>$(e,c,t)},i.a.createElement(ne.a,{required:!0,id:"qty-filled-required",label:"Ingredient Quantity",variant:"outlined",value:s,onChange:k,placeholder:"Ingredient Quantity",name:"qty",type:"number",className:n.textField,inputProps:{step:"0.01"}}),i.a.createElement(ne.a,{id:"itemName-filled-required",label:"Item Name (For New Items)",variant:"outlined",value:g,onChange:N,placeholder:"Item Name",name:"itemName",disabled:q,className:n.textField}),i.a.createElement(ne.a,{id:"item-id-filled",select:!0,label:"Item",value:f,name:"itemId",variant:"outlined",onChange:S,className:n.textField,helperText:"Select Item For Ingredient"},i.a.createElement(Fe.a,{value:void 0},i.a.createElement("em",null,"None")),Object(ve.get)(e,"items",[]).map(e=>i.a.createElement(Fe.a,{key:e.id,value:e.id},e.name))),i.a.createElement(ne.a,{id:"uom-id-filled",select:!0,label:"Unit of Measure",value:w,name:"uomId",variant:"outlined",onChange:T,className:n.textField,helperText:"Select Unit of Measure"},i.a.createElement(Fe.a,{value:void 0},i.a.createElement("em",null,"None")),Object(ve.get)(e,"uoms",[]).map(e=>i.a.createElement(Fe.a,{key:e.id,value:e.id},e.name," ",e.alias&&"- ".concat(e.alias)))),a&&i.a.createElement(H,{error:a}),i.a.createElement(j.a,{disabled:R||r,type:"submit",className:n.saveButton,variant:"contained",color:"primary"},"Save")))))}));function Le(){const e=Object(q.a)(["\n  query($id: ID!) {\n    ingredient(id: $id) {\n      id\n      qty\n      item {\n        id\n        name\n      }\n      uom {\n        id\n        name\n        alias\n      }\n      recipe {\n        id\n      }\n    }\n    items {\n      id\n      name\n    }\n    uoms {\n      id\n      name\n      alias\n    }\n  }\n"]);return Le=function(){return e},e}function Pe(){const e=Object(q.a)(["\n  mutation(\n    $recipeId: ID!\n    $qty: Float!\n    $itemName: String\n    $itemId: ID\n    $uomId: ID\n    $id: ID!\n  ) {\n    updateIngredient(\n      recipeId: $recipeId\n      qty: $qty\n      itemName: $itemName\n      itemId: $itemId\n      uomId: $uomId\n      id: $id\n    ) {\n      id\n      item {\n        id\n        name\n      }\n    }\n  }\n"]);return Pe=function(){return e},e}const We=B()(Pe()),Ve=B()(Le()),Ge=e=>{const t=e.classes,n=(e.history,e.data),a=e.error,c=e.loading,o=e.ingredientId,s=n.ingredient.recipe.id,m=Object(r.useState)(n.ingredient.qty),d=Object(he.a)(m,2),u=d[0],g=d[1],p=Object(r.useState)(n.ingredient.item.name),b=Object(he.a)(p,2),E=b[0],h=b[1],f=Object(r.useState)(n.ingredient.item.id),O=Object(he.a)(f,2),y=O[0],I=O[1],w=Object(r.useState)(Object(ve.get)(n,"ingredient.uom.id")),x=Object(he.a)(w,2),k=x[0],N=x[1],S=e=>{g(Number(e.target.value))},T=e=>{h(e.target.value)},$=e=>{e.target.value&&h(""),I(Number(e.target.value))},q=e=>{N(e.target.value)},R=function(){var e=Object(J.a)(G.a.mark((function e(t,n,a){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n();case 4:e.sent&&console.log("updated ingredient"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),B=!!y,C=""===u;return i.a.createElement(l.Mutation,{mutation:We,variables:{recipeId:s,qty:u,itemName:E,itemId:y,uomId:k,id:o}},(e,r)=>i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{to:"/edit-ingredients/".concat(s)},i.a.createElement(j.a,{variant:"outlined",color:"secondary",className:t.backButton},"Back To Edit Ingredients")),i.a.createElement("form",{onSubmit:t=>R(t,e,s)},i.a.createElement(ne.a,{required:!0,id:"qty-filled-required",label:"Ingredient Quantity",variant:"outlined",value:u,onChange:S,placeholder:"Ingredient Quantity",name:"qty",type:"number",className:t.textField,inputProps:{step:"0.01"}}),i.a.createElement(ne.a,{id:"itemName-filled-required",label:"Item Name (For New Items)",variant:"outlined",value:E,onChange:T,placeholder:"Item Name",name:"itemName",disabled:B,className:t.textField}),i.a.createElement(ne.a,{id:"item-id-filled",select:!0,label:"Item",value:y,name:"itemId",variant:"outlined",onChange:$,className:t.textField,helperText:"Select Item For Ingredient"},i.a.createElement(Fe.a,{value:void 0},i.a.createElement("em",null,"None")),Object(ve.get)(n,"items",[]).map(e=>i.a.createElement(Fe.a,{key:e.id,value:e.id},e.name))),i.a.createElement(ne.a,{id:"uom-id-filled",select:!0,label:"Unit of Measure",value:k,name:"uomId",variant:"outlined",onChange:q,className:t.textField,helperText:"Select Unit of Measure"},i.a.createElement(Fe.a,{value:void 0},i.a.createElement("em",null,"None")),Object(ve.get)(n,"uoms",[]).map(e=>i.a.createElement(Fe.a,{key:e.id,value:e.id},e.name," ",e.alias&&"- ".concat(e.alias)))),a&&i.a.createElement(H,{error:a}),i.a.createElement(j.a,{disabled:C||c,type:"submit",className:t.saveButton,variant:"contained",color:"primary"},"Save"))))};var Je=Object(M.a)(e=>({textField:{marginBottom:10,width:"100%"},backButton:{marginBottom:10},saveButton:{width:"100%"}}),{withTheme:!0})(Object(E.g)(e=>{const t=e.classes,n=e.history,a=Object(E.f)().ingredientId;return i.a.createElement(te.a,{maxWidth:"sm"},i.a.createElement(l.Query,{query:Ve,variables:{id:a}},({data:e,error:r,loading:c})=>Object(ve.get)(e,"ingredient")&&!c?i.a.createElement(Ge,{data:e,loading:c,classes:t,history:n,ingredientId:a}):"loading..."))})),He=n(193),Ye=n(153),ze=n(197);function Ke(){const e=Object(q.a)(["\n  query($recipeId: ID!) {\n    recipe(id: $recipeId) {\n      name\n      instructions {\n        text\n        textIngredients {\n          wordIndex\n          ingredientId\n        }\n        textTimes {\n          wordIndex\n          timeValue\n        }\n        ingredients {\n          id\n          category\n\n          qty\n          item {\n            name\n          }\n          uom {\n            name\n            alias\n          }\n        }\n      }\n    }\n  }\n"]);return Ke=function(){return e},e}const Xe=B()(Ke()),Ze=e=>{const t=e.data,n=(e.error,e.classes);return i.a.createElement("div",null,t.recipe.instructions.map(e=>i.a.createElement(Q.a,{variant:"outlined",key:"instruction-".concat(e.id),className:n.paperRoot},i.a.createElement(y.a,{variant:"body1"},Object(ve.get)(e,"text")),!Object(ve.isEmpty)(Object(ve.get)(e,"ingredients"))&&i.a.createElement(He.a,null,i.a.createElement(y.a,{variant:"subtitle2"},"Ingredients"),Object(ve.get)(e,"ingredients").map(t=>i.a.createElement(Ye.a,{key:"instruction-".concat(e.id,"-ingredients-").concat(t.id)},i.a.createElement(ze.a,{primary:"Item: ".concat(Object(ve.get)(t,"item.name")),secondary:"Quantity: ".concat(Object(ve.get)(t,"qty")," ").concat(Object(ve.get)(t,"uom")&&" \n                                ".concat(Object(ve.get)(t,"uom.name")," - \n                                ").concat(Object(ve.get)(t,"uom.alias")))})))))))};var _e=Object(M.a)(e=>({linkButton:{width:"`100%"},paperRoot:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2)}}),{withTheme:!0})(Object(E.g)(U(e=>{let t=Object(E.f)().recipeId;const n=e.classes;return i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{to:"/"},i.a.createElement(j.a,{variant:"outlined",color:"secondary"},"Back To Recipes")),i.a.createElement(l.Query,{query:Xe,variables:{recipeId:t}},({data:e,loading:t,error:a})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{variant:"h2"},Object(ve.get)(e,"recipe.name")," Instructions"),Object(ve.get)(e,"recipe.instructions")&&!t?i.a.createElement(Ze,{data:e,error:a,classes:n}):"loading")))})));function et(){const e=Object(q.a)(["\n  query($recipeId: ID!) {\n    recipe(id: $recipeId) {\n      id\n      name\n      author {\n          id\n      }\n      instructions {\n        text\n        textIngredients {\n          wordIndex\n          ingredientId\n        }\n        textTimes {\n          wordIndex\n          timeValue\n        }\n        ingredients {\n          id\n          category\n\n          qty\n          item {\n            name\n          }\n          uom {\n            name\n            alias\n          }\n        }\n      }\n    }\n  }\n"]);return et=function(){return e},e}const tt=B()(et()),nt=e=>{const t=e.data,n=(e.error,e.classes),a=e.me,r=a&&t.recipe.author.id===a.id;return i.a.createElement("div",null,t.recipe.instructions.map(e=>i.a.createElement(i.a.Fragment,null,i.a.createElement(Q.a,{variant:"outlined",key:"instruction-".concat(e.id),className:n.paperRoot},i.a.createElement(y.a,null,r&&i.a.createElement(v.a,{to:"/update-instruction/".concat(e.id)},i.a.createElement(D.a,{className:n.fontIcon}))),i.a.createElement(y.a,{variant:"body1"},Object(ve.get)(e,"text")),!Object(ve.isEmpty)(Object(ve.get)(e,"ingredients"))&&i.a.createElement(He.a,null,i.a.createElement(y.a,{variant:"subtitle2"},"Ingredients"),Object(ve.get)(e,"ingredients").map(e=>i.a.createElement(Ye.a,null,i.a.createElement(ze.a,{primary:"Item: ".concat(Object(ve.get)(e,"item.name")),secondary:"Quantity: ".concat(Object(ve.get)(e,"qty")," ").concat(Object(ve.get)(e,"uom")&&" \n                                ".concat(Object(ve.get)(e,"uom.name")," - \n                                ").concat(Object(ve.get)(e,"uom.alias")))}))))),r&&i.a.createElement(v.a,{to:"/add-instruction/".concat(t.recipe.id)},i.a.createElement(j.a,{className:n.linkButton,variant:"contained",color:"secondary"},"Add Instruction")))))};var at=Object(M.a)(e=>({linkButton:{width:"`100%"},paperRoot:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2)},fontIcon:{float:"right",marginRight:5,cursor:"pointer"}}),{withTheme:!0})(Object(E.g)(U(e=>{let t=Object(E.f)().recipeId;const n=e.classes,a=e.session;return i.a.createElement(te.a,{maxWidth:"sm"},i.a.createElement(v.a,{to:"/"},i.a.createElement(j.a,{variant:"outlined",color:"secondary"},"Back To Recipes")),i.a.createElement(l.Query,{query:tt,variables:{recipeId:t}},({data:e,loading:t,error:r})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{variant:"h4"},Object(ve.get)(e,"recipe.name")," Instructions"),Object(ve.get)(e,"recipe.instructions")&&!t?i.a.createElement(nt,{data:e,error:r,classes:n,me:a.me}):"loading")))})));var rt=U(({session:e,refetch:t})=>i.a.createElement(E.c,{history:w,basename:"/qrr-frontend"},i.a.createElement("div",null,i.a.createElement($,{session:e}),i.a.createElement(E.b,{exact:!0,path:"/",component:()=>i.a.createElement(W,null)}),i.a.createElement(E.b,{exact:!0,path:"/signup",component:()=>i.a.createElement(_,{refetch:t})}),i.a.createElement(E.b,{exact:!0,path:"/signin",component:()=>i.a.createElement(se,{refetch:t})}),i.a.createElement(E.b,{exact:!0,path:"/account",component:()=>i.a.createElement(de,null)}),i.a.createElement(E.b,{exact:!0,path:"/admin",component:()=>i.a.createElement(ue,null)}),i.a.createElement(E.b,{exact:!0,path:"/add-recipe",component:()=>i.a.createElement(Ee,null)}),i.a.createElement(E.b,{path:"/update-recipe/:id",component:()=>i.a.createElement(ke,null)}),i.a.createElement(E.b,{path:"/view-ingredients/:recipeId",component:()=>i.a.createElement($e,null)}),i.a.createElement(E.b,{path:"/edit-ingredients/:recipeId",component:()=>i.a.createElement(Ce,{session:e})}),i.a.createElement(E.b,{path:"/add-ingredient/:recipeId",component:()=>i.a.createElement(Ae,null)}),i.a.createElement(E.b,{path:"/update-ingredient/:ingredientId",component:()=>i.a.createElement(Je,null)}),i.a.createElement(E.b,{path:"/view-instructions/:recipeId",component:()=>i.a.createElement(_e,null)}),i.a.createElement(E.b,{path:"/edit-instructions/:recipeId",component:()=>i.a.createElement(at,{session:e})}))));const it=new d.a({uri:"https://quarantine-recipe-repository.appspot.com/graphql"}),ct=new m.a((e,t)=>(e.setContext(({headers:e={}})=>{const t=localStorage.getItem("token");return t&&(e=Object(a.a)({},e,{"x-token":t})),{headers:e}}),t(e))),ot=Object(u.a)(({graphQLErrors:e,networkError:t})=>{e&&e.forEach(({message:e,locations:t,path:n})=>{console.log("GraphQL error",e),"UNAUTHENTICATED"===e&&x(mt)}),t&&(console.log("Network error",t),401===t.statusCode&&x(mt))}),lt=m.a.from([ct,ot,it]),st=new g.a,mt=new s.a({link:lt,cache:st}),dt=Object(p.a)({palette:{common:{black:"#000",white:"#fff"},background:{paper:"#fff",default:"#fafafa"},primary:{light:"rgba(116, 195, 30, 1)",main:"rgba(87, 161, 3, 1)",dark:"rgba(65, 117, 5, 1)",contrastText:"#fff"},secondary:{light:"rgba(74, 144, 226, 1)",main:"rgba(9, 96, 198, 1)",dark:"rgba(5, 61, 128, 1)",contrastText:"#fff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}}});o.a.render(i.a.createElement(l.ApolloProvider,{client:mt},i.a.createElement(b.a,{theme:dt},i.a.createElement(rt,null))),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.6264915e.chunk.js.map